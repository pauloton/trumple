"use client";
import { useState, useEffect, useCallback, useRef } from "react";

const TRUMP_IMG = "data:image/png;base64,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";

const C = {
  bg:       "#0A1628",
  card:     "rgba(255,255,255,0.07)",
  cardOver: "rgba(255,255,255,0.13)",
  locked:   "#F5C518",
  border:   "rgba(255,255,255,0.12)",
  borderHi: "rgba(255,255,255,0.28)",
  red:      "#B22234",
  gold:     "#F5C518",
  text:     "#ffffff",
  dim:      "rgba(255,255,255,0.45)",
  dimmer:   "rgba(255,255,255,0.25)",
  dimmest:  "rgba(255,255,255,0.08)",
};

function shuffleArray(arr) {
  const s = [...arr];
  for (let i = s.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [s[i], s[j]] = [s[j], s[i]];
  }
  return s;
}

function formatTime(ms) {
  const mins = Math.floor(ms / 60000);
  const secs = Math.floor((ms % 60000) / 1000);
  const centis = Math.floor((ms % 1000) / 10);
  return { display: mins + ":" + secs.toString().padStart(2,"0") + "." + centis.toString().padStart(2,"0") };
}

function getStars(attempts) {
  if (attempts === 1) return 3;
  if (attempts <= 3) return 2;
  return 1;
}

function getStats() {
  if (typeof window === "undefined") return { played: 0, best: null };
  try {
    return {
      played: parseInt(localStorage.getItem("trumple_played") || "0", 10),
      best:   parseInt(localStorage.getItem("trumple_best")   || "0", 10) || null,
    };
  } catch { return { played: 0, best: null }; }
}
function saveStats(timeMs) {
  if (typeof window === "undefined") return;
  try {
    const prev = getStats();
    localStorage.setItem("trumple_played", String(prev.played + 1));
    if (!prev.best || timeMs < prev.best) localStorage.setItem("trumple_best", String(timeMs));
  } catch {}
}

function useTimer() {
  const [time, setTime] = useState(0);
  const startRef = useRef(null);
  const rafRef   = useRef(null);
  const runRef   = useRef(false);
  const tick = useCallback(() => {
    if (!runRef.current) return;
    setTime(Date.now() - startRef.current);
    rafRef.current = requestAnimationFrame(tick);
  }, []);
  const start = useCallback(() => {
    startRef.current = Date.now(); runRef.current = true;
    rafRef.current = requestAnimationFrame(tick);
  }, [tick]);
  const stop = useCallback(() => {
    runRef.current = false;
    if (rafRef.current) cancelAnimationFrame(rafRef.current);
  }, []);
  useEffect(() => () => { if (rafRef.current) cancelAnimationFrame(rafRef.current); }, []);
  return { time, start, stop };
}

const WORDS_3 = ["Beautiful!", "Tremendous!", "Like nobody's ever seen!", "The greatest in history!", "Unbelievable!", "Phenomenal!", "Record-breaking!"];
const WORDS_2 = ["Terrific!", "Outstanding!", "Brilliant!", "Incredible!", "Fantastic!", "Huge!", "The best!"];
const WORDS_1 = ["Amazing!", "Winning!", "Never before!"];
function getCelebWord(stars) {
  const list = stars === 3 ? WORDS_3 : stars === 2 ? WORDS_2 : WORDS_1;
  return list[Math.floor(Math.random() * list.length)];
}

const SHARE_CTAS = ["Share your score!", "Spread the chaos!", "Tell them!", "Pass it on!", "Think you can beat this?"];
const shareCta = SHARE_CTAS[Math.floor(Math.random() * SHARE_CTAS.length)];

function Confetti({ active }) {
  const pieces = useRef(
    Array.from({ length: 70 }, (_, i) => ({
      id: i, x: Math.random() * 100, delay: Math.random() * 1.4,
      duration: 1.6 + Math.random() * 1.4,
      color: ["#B22234","#B22234","#ffffff","#ffffff","#1C3F8C","#1C3F8C","#F5C518"][i % 7],
      size: 5 + Math.random() * 7, drift: (Math.random() - 0.5) * 80, rot: Math.random() * 360,
    }))
  ).current;
  if (!active) return null;
  return (
    <div style={{ position:"fixed", inset:0, pointerEvents:"none", overflow:"hidden", zIndex:9999 }}>
      {pieces.map(pc => (
        <div key={pc.id} style={{
          position:"absolute", top:0, left:pc.x+"%",
          width:pc.size+"px", height:(pc.size*0.45)+"px",
          background:pc.color, borderRadius:"2px",
          "--cdrift":pc.drift+"px", "--crot":(pc.rot+540)+"deg",
          animation:"confettiFall "+pc.duration+"s ease-in "+pc.delay+"s both",
        }}/>
      ))}
    </div>
  );
}

function StarDisplay({ stars, size = 28, celebrate = false }) {
  const [vis, setVis] = useState(celebrate ? 0 : stars);
  useEffect(() => {
    if (!celebrate) { setVis(stars); return; }
    setVis(0);
    const timers = [];
    for (let i = 1; i <= stars; i++)
      timers.push(setTimeout(() => setVis(i), 200 + i * 145));
    return () => timers.forEach(clearTimeout);
  }, [celebrate, stars]);
  return (
    <div style={{ display:"flex", gap:"8px" }}>
      {Array.from({ length: stars }, (_, i) => {
        const filled = i + 1 <= vis;
        return (
          <svg key={i} width={size} height={size} viewBox="0 0 24 24"
            fill={filled ? C.gold : "none"} stroke={C.gold} strokeWidth="2" strokeLinejoin="round"
            style={{
              opacity: filled ? 1 : 0.15, transform: filled ? "scale(1.15)" : "scale(0.9)",
              transition: "all 0.35s cubic-bezier(0.34,1.56,0.64,1)",
              animation: filled && celebrate ? "starPop 0.35s ease "+(0.17+(i+1)*0.145)+"s both" : "none",
            }}>
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
          </svg>
        );
      })}
    </div>
  );
}

function AnimatedLogo() {
  const word = "TRUMPLE";
  const letters = word.split("");
  const n = letters.length;
  const [positions, setPositions] = useState(() => {
    const idx = letters.map((_, i) => i);
    for (let i = idx.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [idx[i], idx[j]] = [idx[j], idx[i]];
    }
    return idx;
  });
  const [solved, setSolved] = useState(false);

  useEffect(() => {
    let current = [...positions];
    let tick = 0; const CHAOS = 22; let step = 0;
    const interval = setInterval(() => {
      tick++;
      if (tick <= CHAOS) {
        for (let k = 0; k < 4; k++) {
          const a = Math.floor(Math.random() * n);
          const b = Math.floor(Math.random() * n);
          [current[a], current[b]] = [current[b], current[a]];
        }
        setPositions([...current]);
      } else {
        let moved = false;
        for (let i = step; i < n; i++) {
          if (current[i] !== i) {
            const from = current.indexOf(step);
            [current[from], current[step]] = [current[step], current[from]];
            setPositions([...current]); step++; moved = true; break;
          } else { step++; }
        }
        if (!moved || current.every((v, i) => v === i)) { clearInterval(interval); setSolved(true); }
      }
    }, 65);
    return () => clearInterval(interval);
  }, []);

  const lw = "clamp(1.6rem, 5.6vw, 3.2rem)";
  const fs = "clamp(1.6rem, 5.6vw, 3.2rem)";
  const h  = "clamp(2rem, 7vw, 3.8rem)";

  return (
    <div style={{ position:"relative", height:h, width:"calc("+lw+" * "+n+")", margin:"0 auto" }}>
      {letters.map((letter, correctIdx) => {
        const dispIdx = positions.indexOf(correctIdx);
        return (
          <span key={correctIdx} style={{
            position:"absolute", left:"calc("+lw+" * "+dispIdx+")", top:0,
            width:lw, textAlign:"center", fontSize:fs, fontWeight:900,
            fontFamily:"'Space Grotesk', sans-serif",
            color: solved ? C.text : C.dimmer,
            transition:"left 0.16s cubic-bezier(0.34,1.56,0.64,1), color 0.5s ease",
            lineHeight:1.1, userSelect:"none",
          }}>{letter}</span>
        );
      })}
    </div>
  );
}

function LoadingScreen() {
  return (
    <div style={{ display:"flex", flexDirection:"column", alignItems:"center", justifyContent:"center", minHeight:"100dvh" }}>
      <div style={{ fontFamily:"'Space Grotesk', sans-serif", fontWeight:900, fontSize:"2.2rem", color:C.text }}>TRUMPLE</div>
      <div style={{ marginTop:"1rem", color:C.dimmer, fontSize:"0.8rem", fontFamily:"'JetBrains Mono', monospace", animation:"pulse 1.5s ease infinite" }}>
        Loading today&apos;s chaos...
      </div>
    </div>
  );
}

function ErrorScreen() {
  return (
    <div style={{ display:"flex", flexDirection:"column", alignItems:"center", justifyContent:"center", minHeight:"100dvh", padding:"2rem", textAlign:"center" }}>
      <div style={{ fontFamily:"'Space Grotesk', sans-serif", fontWeight:900, fontSize:"2.2rem", color:C.text }}>TRUMPLE</div>
      <div style={{ marginTop:"1.5rem", color:C.dim, fontSize:"0.9rem" }}>No puzzle today</div>
      <div style={{ marginTop:"0.5rem", color:C.dimmer, fontSize:"0.75rem" }}>Check back tomorrow!</div>
    </div>
  );
}

function IntroScreen({ onStart, puzzle }) {
  const [show, setShow] = useState(false);
  useEffect(() => { setTimeout(() => setShow(true), 100); }, []);
  const dateLabel = new Date(puzzle.date + "T12:00:00").toLocaleDateString("en-US", {
    weekday:"long", month:"long", day:"numeric", year:"numeric"
  });
  return (
    <div style={{
      display:"flex", flexDirection:"column", alignItems:"center", justifyContent:"center",
      minHeight:"100dvh", padding:"2rem", textAlign:"center", position:"relative",
      opacity: show ? 1 : 0, transform: show ? "translateY(0)" : "translateY(20px)",
      transition:"all 0.8s cubic-bezier(0.16,1,0.3,1)",
    }}>
      <img src={TRUMP_IMG} alt="" style={{
        position:"fixed", bottom:0, right:0,
        height:"clamp(140px, 30vw, 220px)", width:"auto",
        objectFit:"contain", objectPosition:"bottom right",
        opacity: show ? 0.9 : 0,
        transform: show ? "translateX(0)" : "translateX(30px)",
        transition:"all 1s cubic-bezier(0.16,1,0.3,1) 0.4s",
        pointerEvents:"none", userSelect:"none",
      }}/>
      <AnimatedLogo />
      <div style={{ fontSize:"0.8rem", color:C.dimmer, fontFamily:"'JetBrains Mono', monospace", margin:"1.4rem 0 3rem" }}>
        {dateLabel}
      </div>
      <button onClick={onStart} style={{
        background:C.red, color:"#ffffff", border:"none", borderRadius:"14px",
        padding:"1rem 3rem", fontSize:"1.05rem", fontWeight:700, cursor:"pointer",
        fontFamily:"'Space Grotesk', sans-serif", letterSpacing:"0.05em",
        transition:"transform 0.2s ease", boxShadow:"0 4px 20px rgba(178,34,52,0.4)",
      }}
        onMouseEnter={e => e.target.style.transform="scale(1.05)"}
        onMouseLeave={e => e.target.style.transform="scale(1)"}
      >SORT THE CHAOS</button>
    </div>
  );
}

function RevealScreen({ events, onRevealComplete }) {
  const [revealed, setRevealed] = useState(0);
  useEffect(() => {
    if (revealed < events.length) { const t = setTimeout(() => setRevealed(r => r+1), 400); return () => clearTimeout(t); }
    else { const t = setTimeout(onRevealComplete, 800); return () => clearTimeout(t); }
  }, [revealed, events.length, onRevealComplete]);
  return (
    <div style={{ width:"100%", maxWidth:"440px", margin:"0 auto", padding:"1rem 0.75rem", height:"100dvh", display:"flex", flexDirection:"column", overflow:"hidden" }}>
      <div style={{ height:"1rem", flexShrink:0 }}/>
      <div style={{ display:"flex", flexDirection:"column", gap:"clamp(0.3rem,1vh,0.6rem)", flex:1, minHeight:0 }}>
        {events.map((event, i) => (
          <div key={event.id} style={{
            background:C.card, border:"1px solid "+C.border, borderRadius:"12px",
            padding:"clamp(0.5rem,1.2vh,1rem) clamp(1rem,3vw,1.5rem)",
            display:"flex", alignItems:"center", justifyContent:"center", flex:1, minHeight:0, overflow:"hidden",
            opacity: i < revealed ? 1 : 0, transform: i < revealed ? "translateX(0)" : "translateX(-20px)",
            transition:"all 0.4s cubic-bezier(0.16,1,0.3,1)",
          }}>
            <div style={{ fontSize:"clamp(0.82rem,2.3vw,0.98rem)", fontWeight:600, color:C.text, fontFamily:"'DM Sans', sans-serif", lineHeight:1.3, textAlign:"center" }}>
              {event.title}
            </div>
          </div>
        ))}
      </div>
      {revealed >= events.length && (
        <div style={{ textAlign:"center", marginTop:"1.5rem", fontSize:"0.85rem", color:C.dimmer, fontFamily:"'JetBrains Mono', monospace", animation:"pulse 1s ease infinite" }}>Shuffling...</div>
      )}
    </div>
  );
}

function reorderAroundLocks(events, fromIndex, toIndex, lockedCorrect) {
  const dragged = events[fromIndex];
  const result = new Array(events.length).fill(null);
  events.forEach((ev, i) => { if (lockedCorrect[ev.id]) result[i] = ev; });
  const unlocked = events.filter((ev, i) => !lockedCorrect[ev.id] && i !== fromIndex);
  let insertAt = 0;
  for (let i = 0; i < toIndex; i++) { if (!result[i]) insertAt++; }
  unlocked.splice(insertAt, 0, dragged);
  let ui = 0;
  for (let i = 0; i < result.length; i++) { if (!result[i]) result[i] = unlocked[ui++]; }
  return result;
}

function DraggableList({ events, lockedCorrect, wrongCards, onReorder }) {
  const [dragIndex, setDragIndex] = useState(null);
  const [overIndex, setOverIndex] = useState(null);
  const overIndexRef = useRef(null);
  const listRef = useRef(null);
  const touchData = useRef({ active:false, index:null, startY:0, clone:null, startTop:0 });
  const eventsRef = useRef(events);
  eventsRef.current = events;

  const handleDragStart = (e, i) => { if (lockedCorrect[events[i]?.id]) return; setDragIndex(i); e.dataTransfer.effectAllowed="move"; };
  const handleDragOver  = (e, i) => { e.preventDefault(); setOverIndex(i); };
  const handleDrop = (e, ti) => {
    e.preventDefault();
    if (dragIndex !== null && dragIndex !== ti && !lockedCorrect[events[dragIndex]?.id])
      onReorder(reorderAroundLocks(events, dragIndex, ti, lockedCorrect));
    setDragIndex(null); setOverIndex(null);
  };
  const handleDragEnd = () => { setDragIndex(null); setOverIndex(null); };

  const handleTouchStart = useCallback((e, index) => {
    if (lockedCorrect[eventsRef.current[index]?.id]) return;
    const touch = e.touches[0]; const target = e.currentTarget;
    const rect = target.getBoundingClientRect();
    const clone = target.cloneNode(true);
    Object.assign(clone.style, { position:"fixed", left:rect.left+"px", top:rect.top+"px", width:rect.width+"px", zIndex:9999, opacity:"0.9", transform:"scale(1.04)", boxShadow:"0 8px 32px rgba(0,0,0,0.4)", pointerEvents:"none", transition:"none" });
    document.body.appendChild(clone);
    touchData.current = { active:true, index, startY:touch.clientY, clone, startTop:rect.top };
    overIndexRef.current = null; target.style.opacity="0.2";
    const onMove = (ev) => {
      ev.preventDefault();
      const t = ev.touches[0];
      touchData.current.clone.style.top = (touchData.current.startTop + t.clientY - touchData.current.startY)+"px";
      const items = listRef.current?.children; let found = null;
      for (let i = 0; i < items.length; i++) {
        const r = items[i].getBoundingClientRect();
        if (t.clientY >= r.top && t.clientY <= r.bottom && i !== touchData.current.index) { found = i; break; }
      }
      overIndexRef.current = found; setOverIndex(found);
    };
    const onEnd = () => {
      document.removeEventListener("touchmove", onMove);
      document.removeEventListener("touchend", onEnd);
      if (touchData.current.clone?.parentNode) touchData.current.clone.parentNode.removeChild(touchData.current.clone);
      const from = touchData.current.index; const to = overIndexRef.current;
      if (from !== null && to !== null && from !== to && !lockedCorrect[eventsRef.current[from]?.id])
        onReorder(reorderAroundLocks(eventsRef.current, from, to, lockedCorrect));
      if (listRef.current?.children[from]) listRef.current.children[from].style.opacity="1";
      touchData.current = { active:false, index:null, startY:0, clone:null, startTop:0 };
      overIndexRef.current = null; setDragIndex(null); setOverIndex(null);
    };
    document.addEventListener("touchmove", onMove, { passive:false });
    document.addEventListener("touchend", onEnd);
  }, [lockedCorrect, onReorder]);

  return (
    <div ref={listRef} style={{ display:"flex", flexDirection:"column", gap:"clamp(0.25rem,1vh,0.55rem)", flex:1, minHeight:0 }}>
      {events.map((event, index) => {
        const isLocked = !!lockedCorrect[event.id];
        const isWrong  = !!wrongCards[event.id];
        const isOver   = overIndex === index;
        return (
          <div key={event.id} draggable={!isLocked}
            onDragStart={e => handleDragStart(e, index)} onDragOver={e => handleDragOver(e, index)}
            onDrop={e => handleDrop(e, index)} onDragEnd={handleDragEnd}
            onTouchStart={e => handleTouchStart(e, index)}
            style={{
              background: isLocked ? C.locked : isOver ? C.cardOver : C.card,
              border: isLocked ? "none" : isOver ? "1px solid "+C.borderHi : "1px solid "+C.border,
              borderRadius:"12px", padding:"clamp(0.4rem,1.2vh,1rem) clamp(1rem,3vw,1.5rem)",
              display:"flex", alignItems:"center", justifyContent:"center",
              flex:1, minHeight:0, overflow:"hidden",
              cursor: isLocked ? "default" : "grab", userSelect:"none",
              opacity: dragIndex === index ? 0.3 : 1,
              transition: isLocked ? "background 0.3s ease" : "none",
              animation: isWrong ? "shake 0.4s ease" : isLocked ? "celebrate 0.5s ease" : "none",
            }}>
            <div style={{ fontSize:"clamp(0.8rem,2.2vw,0.95rem)", fontWeight:600, color: isLocked ? C.bg : C.text, fontFamily:"'DM Sans', sans-serif", lineHeight:1.3, textAlign:"center" }}>
              {event.title}
            </div>
          </div>
        );
      })}
    </div>
  );
}

function PlayingScreen({ events, lockedCorrect, wrongCards, onReorder, onLockIn, timeDisplay, isReadOnly=false, onBackToResults }) {
  const allCorrect = events.length > 0 && events.every(ev => lockedCorrect[ev.id]);
  const lockedCount = Object.keys(lockedCorrect).length;

  if (isReadOnly) {
    return (
      <div style={{ width:"100%", maxWidth:"440px", margin:"0 auto", padding:"1rem 0.75rem", height:"100dvh", display:"flex", flexDirection:"column", overflow:"hidden" }}>
        <div style={{ display:"flex", alignItems:"center", justifyContent:"space-between", flexShrink:0, marginBottom:"0.75rem" }}>
          <button onClick={onBackToResults} style={{ background:"transparent", border:"none", color:C.dim, cursor:"pointer", fontFamily:"'DM Sans', sans-serif", fontSize:"0.85rem" }}>&#8592; Back to Score</button>
          <div style={{ fontSize:"0.68rem", color:C.dimmer, fontFamily:"'JetBrains Mono', monospace", textTransform:"uppercase", letterSpacing:"0.05em" }}>Correct Order</div>
        </div>
        <div style={{ display:"flex", flexDirection:"column", gap:"clamp(0.25rem,1vh,0.55rem)", flex:1, minHeight:0 }}>
          {events.map(event => (
            <div key={event.id} style={{ background:C.locked, borderRadius:"12px", padding:"clamp(0.4rem,1.2vh,1rem) clamp(1rem,3vw,1.5rem)", display:"flex", alignItems:"center", justifyContent:"center", flex:1, minHeight:0, overflow:"hidden" }}>
              <div style={{ textAlign:"center" }}>
                <div style={{ fontSize:"clamp(0.8rem,2.2vw,0.95rem)", fontWeight:600, color:C.bg, fontFamily:"'DM Sans', sans-serif", lineHeight:1.3 }}>{event.title}</div>
                <div style={{ fontSize:"clamp(0.6rem,1.6vw,0.72rem)", color:"rgba(10,22,40,0.6)", marginTop:"0.15rem", fontFamily:"'JetBrains Mono', monospace" }}>{event.hint}</div>
                <div style={{ fontSize:"clamp(0.6rem,1.6vw,0.7rem)", color:"rgba(10,22,40,0.4)", marginTop:"0.08rem", fontFamily:"'JetBrains Mono', monospace", fontWeight:700 }}>{event.year}</div>
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  }

  return (
    <div style={{ width:"100%", maxWidth:"440px", margin:"0 auto", padding:"1rem 0.75rem", height:"100dvh", display:"flex", flexDirection:"column", overflow:"hidden" }}>
      <div style={{ display:"flex", justifyContent:"center", alignItems:"center", flexShrink:0, marginBottom:"0.5rem" }}>
        <div style={{ fontSize:"clamp(1.1rem,3.2vw,1.35rem)", fontFamily:"'JetBrains Mono', monospace", color:C.gold, fontWeight:700, letterSpacing:"0.04em" }}>{timeDisplay}</div>
      </div>
      <div style={{ height:"3px", background:C.dimmest, borderRadius:"2px", marginBottom:"0.6rem", flexShrink:0 }}>
        <div style={{ height:"100%", width:((lockedCount/7)*100)+"%", background:C.red, borderRadius:"2px", transition:"width 0.4s ease" }}/>
      </div>
      <DraggableList events={events} lockedCorrect={lockedCorrect} wrongCards={wrongCards} onReorder={onReorder}/>
      {!allCorrect && (
        <button onClick={onLockIn} style={{
          marginTop:"clamp(0.5rem,1.5vh,1rem)", background:C.red, color:"#fff",
          border:"none", borderRadius:"14px", padding:"clamp(0.7rem,1.8vh,1rem) 2rem",
          fontSize:"clamp(0.9rem,2.5vw,1.05rem)", fontWeight:900, cursor:"pointer",
          fontFamily:"'Space Grotesk', sans-serif", letterSpacing:"0.04em",
          flexShrink:0, width:"100%", transition:"transform 0.15s ease",
          boxShadow:"0 4px 18px rgba(178,34,52,0.4)",
        }}
          onMouseEnter={e => e.currentTarget.style.transform="scale(1.02)"}
          onMouseLeave={e => e.currentTarget.style.transform="scale(1)"}
        >Lock It In!</button>
      )}
      {allCorrect && (
        <div style={{ textAlign:"center", marginTop:"1rem", fontSize:"0.85rem", color:C.dim, fontFamily:"'JetBrains Mono', monospace", animation:"pulse 1s ease infinite", flexShrink:0 }}>Chaos sorted...</div>
      )}
    </div>
  );
}

function ShareIcons({ time }) {
  const { display } = formatTime(time);
  const msg = "I sorted the Trumple chaos in " + display + " \uD83C\uDDFA\uD83C\uDDF8 Can you? \u2014 trumple.vercel.app";
  const waUrl = "https://wa.me/?text=" + encodeURIComponent(msg);
  const xUrl  = "https://twitter.com/intent/tweet?text=" + encodeURIComponent(msg);
  const fbUrl = "https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent("https://trumple.vercel.app") + "&quote=" + encodeURIComponent(msg);
  const igUrl = "https://www.instagram.com/";
  const iconBtn = (href, svg) => (
    <a href={href} target="_blank" rel="noopener noreferrer" style={{
      flex:1, display:"flex", alignItems:"center", justifyContent:"center",
      background:C.card, border:"1px solid "+C.border, borderRadius:"14px",
      padding:"0.9rem 0", textDecoration:"none", transition:"background 0.15s, transform 0.15s",
    }}
      onMouseEnter={e => { e.currentTarget.style.background=C.cardOver; e.currentTarget.style.transform="scale(1.07)"; }}
      onMouseLeave={e => { e.currentTarget.style.background=C.card; e.currentTarget.style.transform="scale(1)"; }}
    >{svg}</a>
  );
  return (
    <div style={{ display:"flex", gap:"0.6rem", width:"100%" }}>
      {iconBtn(igUrl, <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={C.text} strokeWidth="1.8"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><circle cx="12" cy="12" r="3.5"/><circle cx="17.5" cy="6.5" r="1" fill={C.text} stroke="none"/></svg>)}
      {iconBtn(waUrl, <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke={C.text} strokeWidth="1.8"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>)}
      {iconBtn(xUrl,  <svg width="22" height="22" viewBox="0 0 24 24" fill={C.text}><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.746l7.73-8.835L1.254 2.25H8.08l4.253 5.622 5.911-5.622zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>)}
      {iconBtn(fbUrl, <svg width="22" height="22" viewBox="0 0 24 24" fill={C.text}><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/></svg>)}
    </div>
  );
}

function CompleteScreen({ time, attempts, onViewChain, firstVisit, onMount }) {
  const stars = getStars(attempts);
  const { display } = formatTime(time);
  const [celebWord] = useState(() => getCelebWord(stars));
  const [showConfetti, setShowConfetti] = useState(false);
  const [stats, setStats] = useState({ played: 0, best: null });
  const hasRun = useRef(false);

  useEffect(() => {
    if (!hasRun.current) {
      hasRun.current = true; onMount(); saveStats(time); setStats(getStats());
      if (firstVisit) { setShowConfetti(true); setTimeout(() => setShowConfetti(false), 4000); }
    }
  }, [firstVisit, onMount, time]);

  const bestDisplay = stats.best ? formatTime(stats.best).display : display;

  return (
    <>
      <Confetti active={showConfetti}/>
      <div style={{ display:"flex", flexDirection:"column", alignItems:"center", padding:"1.5rem 1.25rem", maxWidth:"440px", margin:"0 auto", minHeight:"100dvh", justifyContent:"center" }}>
        <StarDisplay stars={stars} size={32} celebrate={firstVisit}/>
        <div style={{ marginTop:"0.6rem", fontSize:"1.6rem", fontWeight:900, fontFamily:"'Space Grotesk', sans-serif", color:C.gold, letterSpacing:"-0.01em" }}>{celebWord}</div>
        <div style={{ marginTop:"1rem", fontSize:"clamp(3rem,12vw,4.5rem)", fontWeight:700, fontFamily:"'JetBrains Mono', monospace", color:C.text, letterSpacing:"-0.02em", lineHeight:1 }}>{display}</div>
        <div style={{ marginTop:"1rem", display:"flex", gap:"0.5rem", width:"100%" }}>
          {[{ label:"ATTEMPTS", val: attempts }, { label:"PLAYED", val: stats.played || 1 }, { label:"BEST", val: bestDisplay }].map(({ label, val }) => (
            <div key={label} style={{ flex:1, background:C.card, border:"1px solid "+C.border, borderRadius:"12px", padding:"0.75rem 0.5rem", textAlign:"center" }}>
              <div style={{ fontSize:"0.55rem", color:C.dimmer, fontFamily:"'JetBrains Mono', monospace", letterSpacing:"0.1em", textTransform:"uppercase", marginBottom:"0.3rem" }}>{label}</div>
              <div style={{ fontSize:"1rem", fontWeight:700, fontFamily:"'JetBrains Mono', monospace", color:C.text }}>{val}</div>
            </div>
          ))}
        </div>
        <button onClick={onViewChain} style={{ marginTop:"0.75rem", background:"transparent", border:"1px solid "+C.border, borderRadius:"10px", padding:"0.5rem 1.25rem", color:C.dim, fontFamily:"'DM Sans', sans-serif", fontSize:"0.8rem", cursor:"pointer", display:"flex", alignItems:"center", gap:"0.4rem" }}>
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg>
          See correct order
        </button>
        <div style={{ fontSize:"0.95rem", fontWeight:700, color:C.text, fontFamily:"'Space Grotesk', sans-serif", marginTop:"1.5rem", marginBottom:"0.6rem" }}>{shareCta}</div>
        <ShareIcons time={time}/>
        <div style={{ fontSize:"0.65rem", color:C.dimmer, fontFamily:"'JetBrains Mono', monospace", marginTop:"1.25rem", letterSpacing:"0.08em" }}>FRESH CHAOS EVERY DAY</div>
      </div>
    </>
  );
}

const SCREENS = { LOADING:"loading", ERROR:"error", INTRO:"intro", REVEAL:"reveal", PLAYING:"playing", CHAIN_VIEW:"chain_view", COMPLETE:"complete" };

export default function TrumpleApp() {
  const [screen, setScreen]             = useState(SCREENS.LOADING);
  const [puzzle, setPuzzle]             = useState(null);
  const [answerOrder, setAnswerOrder]   = useState([]);
  const [yearMap, setYearMap]           = useState({});
  const [events, setEvents]             = useState([]);
  const [revealEvents, setRevealEvents] = useState([]);
  const [attempts, setAttempts]         = useState(0);
  const [lockedCorrect, setLockedCorrect] = useState({});
  const [wrongCards, setWrongCards]     = useState({});
  const confettiShown = useRef(false);
  const timer = useTimer();

  useEffect(() => {
    const localDate = new Date().toLocaleDateString("en-CA");
    fetch("/api/trump-puzzle?date=" + localDate)
      .then(r => { if (!r.ok) throw new Error("No puzzle"); return r.json(); })
      .then(data => { setPuzzle(data.puzzle); setAnswerOrder(data.answerOrder); setYearMap(data.yearMap); setScreen(SCREENS.INTRO); })
      .catch(() => setScreen(SCREENS.ERROR));
  }, []);

  const handleStart = () => {
    const evts = puzzle.events.map(e => ({ ...e, year: yearMap[e.id] }));
    const shuffled = shuffleArray(evts);
    setEvents(shuffled); setRevealEvents(shuffled);
    setAttempts(0); setLockedCorrect({}); setWrongCards({});
    setScreen(SCREENS.REVEAL);
  };

  const handleRevealComplete = useCallback(() => {
    const evts = puzzle.events.map(e => ({ ...e, year: yearMap[e.id] }));
    setEvents(shuffleArray(evts)); setScreen(SCREENS.PLAYING); timer.start();
  }, [timer, puzzle, yearMap]);

  const handleReorder = useCallback((newEvents) => setEvents(newEvents), []);

  const handleLockIn = () => {
    const newAttempts = attempts + 1;
    setAttempts(newAttempts);
    const newLocked = { ...lockedCorrect }; const newWrong = {};
    events.forEach((ev, i) => {
      if (lockedCorrect[ev.id]) return;
      if (ev.id === answerOrder[i]) newLocked[ev.id] = true;
      else newWrong[ev.id] = true;
    });
    setLockedCorrect(newLocked); setWrongCards(newWrong);
    setTimeout(() => setWrongCards({}), 800);
    if (Object.keys(newLocked).length === 7) { timer.stop(); setTimeout(() => setScreen(SCREENS.COMPLETE), 3200); }
  };

  return (
    <div style={{ background:C.bg, minHeight:"100dvh", color:C.text, fontFamily:"'DM Sans', sans-serif", overflow:"hidden" }}>
      <style>{globalStyles}</style>
      {screen === SCREENS.LOADING    && <LoadingScreen/>}
      {screen === SCREENS.ERROR      && <ErrorScreen/>}
      {screen === SCREENS.INTRO      && puzzle && <IntroScreen puzzle={puzzle} onStart={handleStart}/>}
      {screen === SCREENS.REVEAL     && <RevealScreen events={revealEvents} onRevealComplete={handleRevealComplete}/>}
      {screen === SCREENS.PLAYING    && <PlayingScreen events={events} lockedCorrect={lockedCorrect} wrongCards={wrongCards} onReorder={handleReorder} onLockIn={handleLockIn} timeDisplay={formatTime(timer.time).display}/>}
      {screen === SCREENS.CHAIN_VIEW && <PlayingScreen events={events} lockedCorrect={lockedCorrect} wrongCards={{}} onReorder={()=>{}} onLockIn={()=>{}} timeDisplay="" isReadOnly={true} onBackToResults={() => setScreen(SCREENS.COMPLETE)}/>}
      {screen === SCREENS.COMPLETE   && <CompleteScreen time={timer.time} attempts={attempts} onViewChain={() => setScreen(SCREENS.CHAIN_VIEW)} firstVisit={!confettiShown.current} onMount={() => { confettiShown.current = true; }}/>}
    </div>
  );
}

const globalStyles = "@import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700;900&family=DM+Sans:wght@400;600;700&family=JetBrains+Mono:wght@400;600;700&display=swap');" +
  "* { box-sizing: border-box; margin: 0; padding: 0; -webkit-text-size-adjust: 100%; }" +
  "body { background: #0A1628; margin: 0; overflow: hidden; }" +
  "html { overflow: hidden; }" +
  "::-webkit-scrollbar { display: none; }" +
  "@keyframes shake { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-6px)} 40%{transform:translateX(6px)} 60%{transform:translateX(-4px)} 80%{transform:translateX(4px)} }" +
  "@keyframes celebrate { 0%{transform:scale(1)} 25%{transform:scale(1.03) rotate(-0.5deg)} 50%{transform:scale(1.05) rotate(0.5deg)} 75%{transform:scale(1.03) rotate(-0.3deg)} 100%{transform:scale(1)} }" +
  "@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.5} }" +
  "@keyframes starPop { 0%{transform:scale(0);opacity:0} 50%{transform:scale(1.5);opacity:1} 75%{transform:scale(0.9)} 100%{transform:scale(1.15);opacity:1} }" +
  "@keyframes confettiFall { 0%{transform:translateY(-10px) translateX(0) rotate(0deg);opacity:1} 85%{opacity:1} 100%{transform:translateY(110vh) translateX(var(--cdrift)) rotate(var(--crot));opacity:0} }";
